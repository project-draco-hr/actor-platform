{
  GroupModel groupInfo=groups().get(chatId);
  if (groupInfo == null || groupInfo.getState() == GroupState.DELETED_PENDING || groupInfo.getState() == GroupState.DELETED) {
    return;
  }
  if (groupInfo.getState() == GroupState.JOINED) {
    system().actorOf(GroupLeaveActor.class,"pending_group").send(new GroupLeaveActor.LeaveChat(chatId,groupInfo.getAccessHash()));
    groups().put(chatId,groupInfo.getRaw().updateState(GroupState.DELETED_PENDING));
  }
 else {
    groups().put(chatId,groupInfo.getRaw().updateState(GroupState.DELETED));
  }
  ChatActionsActor.actions().deleteChat(DialogType.TYPE_GROUP,chatId);
}
