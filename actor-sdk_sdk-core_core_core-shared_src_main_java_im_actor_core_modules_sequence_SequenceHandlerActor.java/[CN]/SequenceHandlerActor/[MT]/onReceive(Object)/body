{
  if (message instanceof HandlerWeakUpdate) {
    HandlerWeakUpdate weakUpdate=(HandlerWeakUpdate)message;
    try {
      onWeakUpdateReceived(weakUpdate.getUpdate(),weakUpdate.getDate());
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
 else   if (message instanceof RelatedResponse) {
    if (isUpdating) {
      stash();
      return;
    }
    RelatedResponse relatedResponse=(RelatedResponse)message;
    onRelatedResponse(relatedResponse.getRelatedUsers(),relatedResponse.getRelatedGroups(),relatedResponse.getAfterApply());
  }
 else   if (message instanceof InternalUpdate) {
    if (isUpdating) {
      stash();
      return;
    }
    onInternalUpdate((InternalUpdate)message);
  }
 else {
    super.onReceive(message);
  }
}
