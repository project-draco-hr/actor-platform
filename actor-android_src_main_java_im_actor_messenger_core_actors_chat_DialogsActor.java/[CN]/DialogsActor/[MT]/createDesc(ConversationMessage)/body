{
  if (conversationMessage.getContent() instanceof PhotoMessage) {
    return new MessageDesc(MessageType.PHOTO,null,false,0);
  }
 else   if (conversationMessage.getContent() instanceof VideoMessage) {
    return new MessageDesc(MessageType.VIDEO,null,false,0);
  }
 else   if (conversationMessage.getContent() instanceof TextMessage) {
    return new MessageDesc(MessageType.TEXT,((TextMessage)conversationMessage.getContent()).getText(),false,0);
  }
 else   if (conversationMessage.getContent() instanceof DocumentMessage) {
    return new MessageDesc(MessageType.DOC,((DocumentMessage)conversationMessage.getContent()).getName(),false,0);
  }
 else   if (conversationMessage.getContent() instanceof AudioMessage) {
    return new MessageDesc(MessageType.AUDIO,null,false,0);
  }
 else   if (conversationMessage.getContent() instanceof GroupKick) {
    int related=((GroupKick)conversationMessage.getContent()).getKickedUid();
    return new MessageDesc(MessageType.GROUP_USER_KICK,null,false,related);
  }
 else   if (conversationMessage.getContent() instanceof GroupAdd) {
    int related=((GroupAdd)conversationMessage.getContent()).getAddedUid();
    return new MessageDesc(MessageType.GROUP_USER_ADD,null,false,related);
  }
 else   if (conversationMessage.getContent() instanceof GroupLeave) {
    return new MessageDesc(MessageType.GROUP_USER_LEAVE,null,true,0);
  }
 else   if (conversationMessage.getContent() instanceof GroupCreated) {
    return new MessageDesc(MessageType.GROUP_CREATED,null,false,0);
  }
 else   if (conversationMessage.getContent() instanceof UserRegisteredMessage) {
    return new MessageDesc(MessageType.USER_REGISTERED,null,false,0);
  }
 else   if (conversationMessage.getContent() instanceof UserAddedDeviceMessage) {
    return new MessageDesc(MessageType.USER_ADDED_DEVICE,null,true,0);
  }
 else   if (conversationMessage.getContent() instanceof GroupTitle) {
    return new MessageDesc(MessageType.GROUP_TITLE,null,false,0);
  }
 else   if (conversationMessage.getContent() instanceof GroupAvatar) {
    if (((GroupAvatar)conversationMessage.getContent()).getNewAvatar() != null) {
      return new MessageDesc(MessageType.GROUP_AVATAR,null,false,0);
    }
 else {
      return new MessageDesc(MessageType.GROUP_AVATAR_REMOVED,null,false,0);
    }
  }
 else {
    throw new RuntimeException("Unknown message type: " + conversationMessage.getContent());
  }
}
