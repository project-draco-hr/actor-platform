{
  if (lastUidState.containsKey(uid) && lastUidState.get(uid) >= updateDate) {
    return;
  }
  lastUidState.put(uid,updateDate);
  UserVM vm=getUserVM(uid);
  if (vm != null) {
    vm.getPresence().change(new UserPresence(UserPresence.State.ONLINE));
  }
  self().sendOnce(new UserLastSeen(uid,updateDate + ONLINE_TIMEOUT,updateDate + ONLINE_TIMEOUT),ONLINE_TIMEOUT);
}
