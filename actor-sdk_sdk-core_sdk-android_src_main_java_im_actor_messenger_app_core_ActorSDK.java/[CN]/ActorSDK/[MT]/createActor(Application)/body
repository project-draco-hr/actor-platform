{
  AndroidContext.setContext(application);
  Fresco.initialize(application);
  if (BuildConfig.ENABLE_KEEP_ALIVE) {
    Intent keepAliveService=new Intent(application,KeepAliveService.class);
    PendingIntent pintent=PendingIntent.getService(application,0,keepAliveService,0);
    AlarmManager alarm=(AlarmManager)application.getSystemService(Context.ALARM_SERVICE);
    alarm.setRepeating(AlarmManager.RTC,System.currentTimeMillis(),30 * 1000,pintent);
  }
  AppContext.setContext(application);
  this.smileProcessor=new SmileProcessor(application);
  this.smileProcessor.loadEmoji();
  ConfigurationBuilder builder=new ConfigurationBuilder();
  for (int i=0; i < endpoints.length; i++) {
    builder.addEndpoint(endpoints[i]);
  }
  builder.setPhoneBookProvider(new AndroidPhoneBook());
  builder.setNotificationProvider(new AndroidNotifications(AppContext.getContext()));
  builder.setDeviceCategory(DeviceCategory.MOBILE);
  builder.setPlatformType(PlatformType.ANDROID);
  builder.setApiConfiguration(new ApiConfiguration(getVersionTitle(),getAppId(),getApiKey(),getDeviceName(),AppContext.getContext().getPackageName() + ":" + Build.SERIAL));
  this.messenger=new AndroidMessenger(AppContext.getContext(),builder.build());
  if (getGcmProjectId() != -1) {
    androidPushesActor=system().actorOf(Props.create(AndroidPushActor.class,new ActorCreator<AndroidPushActor>(){
      @Override public AndroidPushActor create(){
        return new AndroidPushActor(application,sdk.messenger);
      }
    }
),"actor/android/push");
  }
}
