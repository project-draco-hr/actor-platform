{
  if (onlineState == null) {
    final AppStateVM vm=modules().getAppStateModule().getAppStateVM();
    onlineState=new AngularValue<String>("online");
    vm.getIsConnecting().subscribe(new ValueChangedListener<Boolean>(){
      @Override public void onChanged(      Boolean val,      ValueModel<Boolean> valueModel){
        if (val) {
          onlineState.changeValue("connecting");
        }
 else {
          if (vm.getIsSyncing().get()) {
            onlineState.changeValue("updating");
          }
 else {
            onlineState.changeValue("online");
          }
        }
      }
    }
);
    vm.getIsSyncing().subscribe(new ValueChangedListener<Boolean>(){
      @Override public void onChanged(      Boolean val,      ValueModel<Boolean> valueModel){
        if (vm.getIsConnecting().get()) {
          onlineState.changeValue("connecting");
        }
 else {
          if (val) {
            onlineState.changeValue("updating");
          }
 else {
            onlineState.changeValue("online");
          }
        }
      }
    }
);
  }
  return onlineState;
}
