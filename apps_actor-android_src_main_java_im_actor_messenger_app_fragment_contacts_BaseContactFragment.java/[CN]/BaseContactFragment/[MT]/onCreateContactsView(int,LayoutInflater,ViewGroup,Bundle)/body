{
  View res=inflate(inflater,container,layoutId,messenger().buildContactDisplayList());
  emptyView=res.findViewById(R.id.emptyCollection);
  View headerPadding=new View(getActivity());
  headerPadding.setBackgroundColor(getResources().getColor(R.color.bg_main));
  headerPadding.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,Screen.dp(4)));
  addHeaderView(headerPadding);
  if (useCompactVersion) {
    View footer=new View(getActivity());
    footer.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,Screen.dp(4)));
    addFooterView(footer);
  }
 else {
    addFooterAction(R.color.contacts_action_share,R.drawable.ic_share_white_24dp,R.string.contacts_share,false,new Runnable(){
      @Override public void run(){
        String inviteMessage=getResources().getString(R.string.invite_message);
        Intent sendIntent=new Intent(Intent.ACTION_SEND);
        sendIntent.putExtra(Intent.EXTRA_TEXT,inviteMessage);
        sendIntent.setType("text/plain");
        startActivity(sendIntent);
      }
    }
);
    addFooterAction(R.color.contacts_action_add,R.drawable.ic_person_add_white_24dp,R.string.contacts_add,true,new Runnable(){
      @Override public void run(){
        startActivity(new Intent(getActivity(),AddContactActivity.class));
      }
    }
);
    FrameLayout footer=new FrameLayout(getActivity());
    footer.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,Screen.dp(112)));
    ImageView shadow=new ImageView(getActivity());
    shadow.setImageResource(R.drawable.card_shadow_bottom);
    shadow.setScaleType(ImageView.ScaleType.FIT_XY);
    shadow.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,Screen.dp(4)));
    footer.addView(shadow);
    addFooterView(footer);
  }
  bind(messenger().getAppState().getIsContactsEmpty(),new ValueChangedListener<Boolean>(){
    @Override public void onChanged(    Boolean val,    ValueModel<Boolean> valueModel){
      if (emptyView != null) {
        if (val) {
          emptyView.setVisibility(View.VISIBLE);
        }
 else {
          emptyView.setVisibility(View.GONE);
        }
      }
    }
  }
);
  return res;
}
