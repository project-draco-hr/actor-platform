{
  final android.support.v7.app.AlertDialog.Builder builder=new android.support.v7.app.AlertDialog.Builder(getActivity(),R.style.AlertDialogStyle);
  builder.setTitle(title);
  final LinearLayout ll=new LinearLayout(getActivity());
  ll.setPadding(Screen.dp(20),0,Screen.dp(20),0);
  final EditText shortcutInput=new EditText(getActivity());
  shortcutInput.setTextColor(Color.BLACK);
  shortcutInput.setText(shortcutText);
  shortcutInput.setCompoundDrawablesWithIntrinsicBounds(shortCutDrawable,null,null,null);
  ll.addView(shortcutInput,LinearLayout.LayoutParams.MATCH_PARENT,LinearLayout.LayoutParams.WRAP_CONTENT);
  builder.setView(ll);
  builder.setPositiveButton(getString(R.string.dialog_ok),new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      Intent shortcutIntent=new Intent(getContext(),ShortcutActivity.class);
      shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS | Intent.FLAG_ACTIVITY_TASK_ON_HOME| Intent.FLAG_ACTIVITY_NEW_DOCUMENT| Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
      shortcutIntent.setAction("im.actor.action.botMessageShortcut");
      shortcutIntent.putExtra("peer",peer.getUnuqueId());
      shortcutIntent.putExtra("text",shortcutInput.getText().toString());
      Intent addIntent=new Intent();
      addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT,shortcutIntent);
      addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME,shortcutInput.getText().toString() + "->" + users().get(peer.getPeerId()).getNick().get());
      BitmapDrawable bd=(BitmapDrawable)shortCutDrawable;
      addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON,bd.getBitmap());
      addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
      getContext().getApplicationContext().sendBroadcast(addIntent);
    }
  }
);
  builder.setNegativeButton(R.string.dialog_cancel,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      dialog.cancel();
    }
  }
);
  builder.setNeutralButton("Icon",new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      Intent intent=new Intent(Intent.ACTION_PICK,MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
      intent.setType("image/*");
      startActivityForResult(intent,REQUEST_GALLERY);
    }
  }
);
  android.support.v7.app.AlertDialog ad=builder.create();
  ad.setOnShowListener(new DialogInterface.OnShowListener(){
    @Override public void onShow(    DialogInterface dialog){
      InputMethodManager inputMethodManager=(InputMethodManager)getActivity().getSystemService(FragmentActivity.INPUT_METHOD_SERVICE);
      shortcutInput.requestFocus();
      inputMethodManager.showSoftInput(shortcutInput,0);
    }
  }
);
  ad.show();
}
