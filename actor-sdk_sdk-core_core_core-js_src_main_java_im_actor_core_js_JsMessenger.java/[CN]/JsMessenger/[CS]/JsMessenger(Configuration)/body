{
  super(configuration);
  fileSystemProvider=(JsFileSystemProvider)Storage.getFileSystemRuntime();
  filesModule=new JsFilesModule(modules);
  jsBindingModule=new JsBindingModule(this,filesModule,modules);
  isElectron=JsElectronApp.isElectron();
  jsIdleModule=new JsIdleModule(this,modules);
  if (isElectron()) {
    JsElectronApp.subscribe("window",new JsElectronListener(){
      @Override public void onEvent(      String content){
        if ("focus".equals(content)) {
          jsIdleModule.onVisible();
        }
 else         if ("blur".equals(content)) {
          jsIdleModule.onHidden();
        }
      }
    }
);
  }
  if (isElectron) {
    getGlobalState().getGlobalTempCounter().subscribe(new ValueChangedListener<Integer>(){
      @Override public void onChanged(      Integer val,      Value<Integer> valueModel){
        if (val == null || val == 0) {
          JsElectronApp.hideNewMessages();
        }
 else {
          JsElectronApp.updateBadge(val);
        }
      }
    }
);
  }
  JsMessenger.instance=this;
}
