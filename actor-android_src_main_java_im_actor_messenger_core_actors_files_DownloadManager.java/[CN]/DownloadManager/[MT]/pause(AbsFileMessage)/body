{
  FileLocation location=fileMessage.getLocation();
  for (int i=0; i < requests.size(); i++) {
    DownloadRequest downloadRequest=requests.get(i);
    if (downloadRequest.location.getFileId() == location.getFileId()) {
      if (downloadRequest.isActive) {
        downloadRequest.future.cancel();
      }
      requests.remove(downloadRequest);
      DownloadModel.downloadState(location.getFileId()).change(new DownloadState(DownloadState.State.NONE));
      cancelled.add(location.getFileId());
    }
  }
}
