{
  if (!BuildConfig.ENABLE_GOOGLE_PLAY) {
    return;
  }
  if (message instanceof Intent) {
    Intent intent=(Intent)message;
    Bundle extras=intent.getExtras();
    GoogleCloudMessaging gcm=GoogleCloudMessaging.getInstance(AppContext.getContext());
    String messageType=gcm.getMessageType(intent);
    if (!extras.isEmpty()) {
      if (GoogleCloudMessaging.MESSAGE_TYPE_MESSAGE.equals(messageType)) {
        if (extras.containsKey("seq")) {
          int seq=Integer.parseInt(extras.getString("seq"));
          if (auth().isAuthorized()) {
            system().actorOf(SequenceActor.sequence()).send(new SequenceActor.ExternalSequence(seq));
          }
 else {
          }
        }
 else {
          Logger.w(TAG,"Unknown message");
        }
      }
    }
 else {
      Logger.w(TAG,"Message with null extras: ignoring");
    }
  }
 else   if (message instanceof TryRegister) {
    Logger.d(TAG,"Trying to register");
    try {
      String regId=GoogleCloudMessaging.getInstance(AppContext.getContext()).register("" + SENDER_ID);
      token.change(regId);
      isRegistered.change(true);
      Logger.d(TAG,"Token registered, sending to server");
      sendToken();
    }
 catch (    IOException e) {
      e.printStackTrace();
      backoff.onFailure();
      long wait=backoff.exponentialWait();
      Logger.d(TAG,"Unable to register, waiting for " + wait + " ms");
      self().sendOnce(new TryRegister(),wait);
    }
  }
 else {
    drop(message);
  }
}
