{
  provider=(JsFileSystemProvider)Storage.getFileSystemRuntime();
  String clientName=IdentityUtils.getClientName();
  String uniqueId=IdentityUtils.getUniqueId();
  ConfigurationBuilder configuration=new ConfigurationBuilder();
  configuration.setApiConfiguration(new ApiConfiguration(APP_NAME,APP_ID,APP_KEY,clientName,uniqueId));
  configuration.setPhoneBookProvider(new JsPhoneBookProvider());
  configuration.setNotificationProvider(new JsNotificationsProvider());
  configuration.setPlatformType(PlatformType.WEB);
  configuration.setDeviceCategory(DeviceCategory.DESKTOP);
  for (  String endpoint : endpoints) {
    configuration.addEndpoint(endpoint);
  }
  messenger=new JsMessenger(configuration.build());
  if (isElectron()) {
    JsElectronApp.subscribe("window",new JsElectronListener(){
      @Override public void onEvent(      String content){
        if ("focus".equals(content)) {
          messenger.onAppVisible();
        }
 else         if ("blur".equals(content)) {
          messenger.onAppHidden();
        }
      }
    }
);
  }
  Log.d(TAG,"JsMessenger created");
}
