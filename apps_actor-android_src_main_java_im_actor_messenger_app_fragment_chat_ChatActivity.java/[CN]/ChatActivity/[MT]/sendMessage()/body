{
  Editable text=messageBody.getText();
  ArrayList<Integer> mentions=convertUrlspansToMarkdownLinks(text);
  final String textString=text.toString().replace(MENTION_BOUNDS_STR,"").trim();
  messageBody.setText("");
  mentionSearchString="";
  if (textString.length() == 0) {
    return;
  }
  if (getResources().getDisplayMetrics().heightPixels <= getResources().getDisplayMetrics().widthPixels) {
    keyboardUtils.setImeVisibility(messageBody,false);
  }
  messenger().sendMessage(peer,textString,mentions);
  messenger().trackTextSend(peer);
}
