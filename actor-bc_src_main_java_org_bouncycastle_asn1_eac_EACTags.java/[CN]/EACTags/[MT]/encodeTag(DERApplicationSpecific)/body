{
  int retValue=BERTags.APPLICATION;
  boolean constructed=spec.isConstructed();
  if (constructed) {
    retValue|=BERTags.CONSTRUCTED;
  }
  int tag=spec.getApplicationTag();
  if (tag > 31) {
    retValue|=0x1F;
    retValue<<=8;
    int currentByte=tag & 0x7F;
    retValue|=currentByte;
    tag>>=7;
    while (tag > 0) {
      retValue|=0x80;
      retValue<<=8;
      currentByte=tag & 0x7F;
      tag>>=7;
    }
  }
 else {
    retValue|=tag;
  }
  return retValue;
}
