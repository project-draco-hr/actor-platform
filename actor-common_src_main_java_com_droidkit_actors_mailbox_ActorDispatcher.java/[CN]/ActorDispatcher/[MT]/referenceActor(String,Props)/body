{
synchronized (LOCK) {
    if (scopes.containsKey(path)) {
      return scopes.get(path).getActorRef();
    }
    Mailbox mailbox=props.createMailbox(dispatcher.getQueue());
    ActorEndpoint endpoint=endpoints.get(path);
    if (endpoint == null) {
      endpoint=new ActorEndpoint(path);
      endpoints.put(path,endpoint);
    }
    ActorScope scope=new ActorScope(actorSystem,mailbox,this,UUID.randomUUID(),path,props,endpoint);
    endpoint.connect(mailbox,scope);
    scopes.put(scope.getPath(),scope);
    scope.getActorRef().send(StartActor.INSTANCE);
    return scope.getActorRef();
  }
}
