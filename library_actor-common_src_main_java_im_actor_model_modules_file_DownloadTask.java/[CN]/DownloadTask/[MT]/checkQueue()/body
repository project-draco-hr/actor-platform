{
  if (isCompleted) {
    return;
  }
  Log.d(TAG,"checkQueue " + currentDownloads + "/"+ nextBlock);
  if (currentDownloads == 0 && nextBlock >= blocksCount) {
    completeDownload();
  }
 else   if (currentDownloads < SIM_BLOCKS_COUNT && nextBlock < blocksCount) {
    currentDownloads++;
    int blockIndex=nextBlock++;
    int offset=blockIndex * blockSize;
    Log.d(TAG,"Starting part #" + blockIndex + " download");
    downloadPart(blockIndex,offset);
    checkQueue();
  }
 else {
    Log.d(TAG,"Task queue is full");
  }
}
