{
  if (isFinished) {
    if (exception == null) {
      dispatchActor.send(new PromiseDispatch(this){
        @Override public void run(){
          then.apply(result);
        }
      }
);
    }
  }
 else {
    callbacks.add(new PromiseCallback<T>(){
      @Override public void onResult(      T t){
        then.apply(t);
      }
      @Override public void onError(      Exception e){
      }
    }
);
  }
  return this;
}
