{
  ModificationHolder<T> holder=new ModificationHolder<T>(modification,runnable);
  if (modification != null) {
    pending.add(holder);
  }
  if (isLocked) {
    return;
  }
  if (pending.size() == 0) {
    return;
  }
  ArrayList<T> backgroundList=displayList.lists[(displayList.currentList + 1) % 2];
  ArrayList<T> initialList=new ArrayList<T>(backgroundList);
  ModificationHolder<T>[] dest=pending.toArray(new ModificationHolder[pending.size()]);
  pending.clear();
  ArrayList<ChangeDescription<T>> modRes=new ArrayList<ChangeDescription<T>>();
  for (  ModificationHolder<T> m : dest) {
    List<ChangeDescription<T>> changes=m.modification.modify(backgroundList);
    modRes.addAll(changes);
  }
  ArrayList<ChangeDescription<T>> androidChanges=ChangeBuilder.processAndroidModifications(modRes,initialList);
  ArrayList<ChangeDescription<T>> appleChanges=ChangeBuilder.processAppleModifications(modRes,initialList);
  requestListSwitch(dest,initialList,androidChanges,appleChanges);
}
