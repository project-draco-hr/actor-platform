{
  while (!isClosed) {
    Runnable pending=null;
synchronized (queue) {
      if (queue.size() > 0) {
        pending=queue.remove(0);
      }
      if (pending == null) {
        try {
          queue.wait();
        }
 catch (        InterruptedException e) {
          e.printStackTrace();
          return;
        }
      }
    }
    if (pending != null) {
      try {
        pending.run();
      }
 catch (      Throwable t) {
        t.printStackTrace();
      }
    }
  }
}
