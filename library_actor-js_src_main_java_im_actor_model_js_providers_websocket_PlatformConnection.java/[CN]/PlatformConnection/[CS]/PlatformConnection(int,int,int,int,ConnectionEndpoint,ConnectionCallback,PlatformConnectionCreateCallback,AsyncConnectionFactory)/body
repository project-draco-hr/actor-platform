{
  this.TAG="Connection#" + connectionId;
  this.connectionId=connectionId;
  this.mtprotoVersion=mtprotoVersion;
  this.apiMajorVersion=apiMajorVersion;
  this.apiMinorVersion=apiMinorVersion;
  this.callback=callback;
  this.factoryCallback=factoryCallback;
  this.rawConnection=connectionFactory.createConnection(endpoint,connectionInterface);
  Log.d(TAG,"Starting connection");
  this.rawConnection.doConnect();
  pingTask=new TimerCompat(new PingRunnable());
  pingTask.schedule(PING_TIMEOUT);
}
