{
  return new Command<Integer>(){
    @Override public void start(    final CommandCallback<Integer> callback){
      request(new RequestEnterGroup(new ApiGroupOutPeer(gid,accessHash)),new RpcCallback<ResponseEnterGroup>(){
        @Override public void onResult(        final ResponseEnterGroup response){
          ApiGroup group=response.getGroup();
          ArrayList<ApiGroup> groups=new ArrayList<ApiGroup>();
          groups.add(group);
          updates().onFatSeqUpdateReceived(response.getSeq(),response.getState(),new UpdateMessage(new ApiPeer(ApiPeerType.GROUP,group.getId()),myUid(),response.getDate(),response.getRid(),new ApiServiceMessage("Joined chat",new ApiServiceExUserJoined())),response.getUsers(),groups);
          updates().executeAfter(response.getSeq(),new Runnable(){
            @Override public void run(){
              runOnUiThread(new Runnable(){
                @Override public void run(){
                  callback.onResult(response.getGroup().getId());
                }
              }
);
            }
          }
);
        }
        @Override public void onError(        final RpcException e){
          runOnUiThread(new Runnable(){
            @Override public void run(){
              callback.onError(e);
            }
          }
);
        }
      }
);
    }
  }
;
}
