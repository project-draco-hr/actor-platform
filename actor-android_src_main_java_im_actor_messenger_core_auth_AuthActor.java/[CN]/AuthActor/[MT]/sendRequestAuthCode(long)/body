{
  processState.setPhoneNumber(phone);
  ask(requests().sendAuthCode(phone,APP_ID,APP_KEY),new FutureCallback<ResponseSendAuthCode>(){
    @Override public void onResult(    ResponseSendAuthCode result){
      String smsHash=result.getSmsHash();
      if (processState.changeState(STATE_REQUESTED_SMS)) {
        processState.setSmsHash(smsHash);
      }
    }
    @Override public void onError(    Throwable throwable){
      processState.changeStateError(STATE_REQUESTING_SMS_ERROR,throwable);
    }
  }
);
}
