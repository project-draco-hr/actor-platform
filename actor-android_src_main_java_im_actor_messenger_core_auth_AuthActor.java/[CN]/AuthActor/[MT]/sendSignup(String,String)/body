{
  processState.setName(name);
  processState.setAvatarImage(avatarPath);
  KeyPair savedKeyPair=keyStorage().getKeyPair();
  ask(requests().signUp(processState.getPhoneNumber(),processState.getSmsHash(),processState.getSmsCode() + "",name,KeyTools.encodeRsaPublicKey(savedKeyPair.getPublic()),deviceIdHash,deviceName,APP_ID,APP_KEY,false),new FutureCallback<ResponseAuth>(){
    @Override public void onResult(    ResponseAuth result){
      completeAuth(result.getUser());
      if (avatarPath != null) {
        AvatarChangeActor.avatarSender().changeAvatar(avatarPath);
      }
    }
    @Override public void onError(    Throwable throwable){
      processState.changeStateError(STATE_SIGNING_ERROR,throwable);
    }
  }
);
}
