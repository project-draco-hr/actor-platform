{
  try {
    Bitmap bmp=ImageHelper.loadOptimizedHQ(fullFilePath);
    if (bmp == null) {
      return;
    }
    Bitmap fastThumb=ImageHelper.scaleFit(bmp,90,90);
    String resultFileName=getExternalTempFile("image","jpg");
    if (resultFileName == null) {
      return;
    }
    ImageHelper.save(bmp,resultFileName);
    byte[] fastThumbData=ImageHelper.save(fastThumb);
    sendPhoto(peer,fileName,bmp.getWidth(),bmp.getHeight(),new FastThumb(fastThumb.getWidth(),fastThumb.getHeight(),fastThumbData),new AndroidFileSystemReference(resultFileName));
  }
 catch (  Throwable t) {
    t.printStackTrace();
  }
}
