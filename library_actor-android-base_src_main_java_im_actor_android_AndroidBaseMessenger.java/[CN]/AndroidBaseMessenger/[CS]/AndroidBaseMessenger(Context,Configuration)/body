{
  super(MessengerEnvironment.ANDROID,configuration);
  this.context=context;
  context.getContentResolver().registerContentObserver(ContactsContract.Contacts.CONTENT_URI,true,new ContentObserver(null){
    @Override public void onChange(    boolean selfChange){
      onPhoneBookChanged();
    }
  }
);
  context.registerReceiver(new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      ConnectivityManager cm=(ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
      NetworkInfo activeNetwork=cm.getActiveNetworkInfo();
      boolean isConnected=activeNetwork != null && activeNetwork.isConnectedOrConnecting();
      NetworkState state;
      if (isConnected) {
switch (activeNetwork.getType()) {
case ConnectivityManager.TYPE_WIFI:
case ConnectivityManager.TYPE_WIMAX:
case ConnectivityManager.TYPE_ETHERNET:
          state=NetworkState.WI_FI;
        break;
case ConnectivityManager.TYPE_MOBILE:
      state=NetworkState.MOBILE;
    break;
default :
  state=NetworkState.UNKNOWN;
}
}
 else {
state=NetworkState.NO_CONNECTION;
}
onNetworkChanged(state);
}
}
,new IntentFilter(android.net.ConnectivityManager.CONNECTIVITY_ACTION));
}
