{
  if (date < state.getInReadDate()) {
    return;
  }
  state=state.changeInReadDate(date).changeInMaxDate(Math.max(state.getInMaxMessageDate(),date));
  conversationState.addOrUpdateItem(state);
  inPendingIndex.removeBeforeValue(date);
  if (!isHiddenPeer) {
    dialogsActor.send(new DialogsActor.CounterChanged(peer,inPendingIndex.getCount()));
  }
  if (dialogsGroupedActor != null) {
    dialogsGroupedActor.send(new ActiveDialogsActor.CounterChanged(peer,inPendingIndex.getCount()));
  }
}
