{
  if (message instanceof Invalidate || message instanceof SeqUpdateTooLong || message instanceof ForceInvalidate) {
    invalidate();
  }
 else   if (message instanceof SeqUpdate || message instanceof FatSeqUpdate) {
    onUpdateReceived(message);
  }
 else   if (message instanceof ExecuteAfter) {
    onExecuteAfter((ExecuteAfter)message);
  }
 else   if (message instanceof PushSeq) {
    onPushSeqReceived(((PushSeq)message).seq);
  }
 else {
    drop(message);
  }
}
