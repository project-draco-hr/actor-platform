{
  View res=inflater.inflate(R.layout.fragment_dialogs,container,false);
  loadingProgress=res.findViewById(R.id.loadingProgress);
  noMessages=res.findViewById(R.id.noMessages);
  dialogsEmptyImage=(ImageView)res.findViewById(R.id.emptyDialogsImage);
  adapter=new DialogsAdapter(messenger().getDialogsGlobalList(),getActivity(),new OnItemClickedListener<Dialog>(){
    @Override public void onClicked(    Dialog item){
      onItemClick(item);
    }
  }
,supportLongClick() ? new OnItemClickedListener<Dialog>(){
    @Override public void onClicked(    final Dialog dialog){
      onItemLongClick(dialog);
    }
  }
 : null);
  RecyclerView messagesView=new RecyclerView(getActivity());
  messagesView.setVerticalScrollBarEnabled(true);
  messagesView.setHorizontalScrollBarEnabled(false);
  messagesView.setHasFixedSize(true);
  LinearLayoutManager linearLayoutManager=new LinearLayoutManager(getActivity());
  linearLayoutManager.setOrientation(LinearLayoutManager.VERTICAL);
  linearLayoutManager.setReverseLayout(false);
  messagesView.setLayoutManager(linearLayoutManager);
  messagesView.setAdapter(adapter);
  ((LinearLayout)res.findViewById(R.id.collectionContainer)).addView(messagesView,new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT));
  loadingProgress.setVisibility(View.GONE);
  noMessages.setVisibility(View.GONE);
  return res;
}
