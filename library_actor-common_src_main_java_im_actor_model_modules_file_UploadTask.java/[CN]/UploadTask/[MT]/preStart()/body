{
  fileSystemProvider=config().getFileSystemProvider();
  if (fileSystemProvider == null) {
    if (LOG) {
      Log.d(TAG,"File system is not available");
    }
    reportError();
    return;
  }
  downloaderProvider=config().getHttpDownloaderProvider();
  if (downloaderProvider == null) {
    if (LOG) {
      Log.d(TAG,"HTTP support is not available");
    }
    reportError();
    return;
  }
  srcReference=fileSystemProvider.fileFromDescriptor(descriptor);
  if (srcReference == null) {
    if (LOG) {
      Log.d(TAG,"Error during file reference creating");
    }
    reportError();
    return;
  }
  destReference=fileSystemProvider.createTempFile();
  if (destReference == null) {
    if (LOG) {
      Log.d(TAG,"Error during file dest reference creating");
    }
    reportError();
    return;
  }
  inputFile=srcReference.openRead();
  if (inputFile == null) {
    if (LOG) {
      Log.d(TAG,"Error during file open");
    }
    reportError();
    return;
  }
  outputFile=destReference.openWrite(srcReference.getSize());
  if (outputFile == null) {
    inputFile.close();
    if (LOG) {
      Log.d(TAG,"Error during dest file open");
    }
    reportError();
    return;
  }
  crc32=new CRC32();
  startUpload();
}
