{
  if (list.getSize() == 0) {
    return;
  }
  ReadState readState=readStates().get(DialogUids.getDialogUid(chatType,chatId));
  if (readState == null || readState.getLastReadSortingKey() == 0) {
    listView.setSelectionFromTop(list.getSize() - 1,-10000);
    return;
  }
  long lastRead=readState.getLastReadSortingKey();
  int index=-1;
  for (int i=list.getSize() - 1; i >= 0; i--) {
    MessageModel messageModel=list.getItem(i);
    if (messageModel.getRaw().getSenderId() == myUid()) {
      continue;
    }
    if (messageModel.getRaw().getSortKey() > lastRead) {
      firstUnread=messageModel.getRid();
      index=i;
      break;
    }
  }
  if (index >= 0) {
    listView.setSelectionFromTop(list.getSize() - index,Screen.dp(48));
  }
 else {
    listView.setSelectionFromTop(list.getSize(),-10000);
  }
}
