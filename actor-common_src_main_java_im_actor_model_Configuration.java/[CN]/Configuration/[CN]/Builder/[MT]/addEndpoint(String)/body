{
  URI uri=URI.create(url);
  if (uri.getScheme().toLowerCase().equals("ssl") || uri.getScheme().toLowerCase().equals("tls")) {
    int port=uri.getPort() > 0 ? uri.getPort() : 443;
    String host=uri.getHost();
    endpoints.add(new ConnectionEndpoint(host,port,ConnectionEndpoint.Type.TCP_TLS));
  }
 else   if (uri.getScheme().toLowerCase().equals("tcp")) {
    int port=uri.getPort() > 0 ? uri.getPort() : 80;
    String host=uri.getHost();
    endpoints.add(new ConnectionEndpoint(host,port,ConnectionEndpoint.Type.TCP));
  }
 else   if (uri.getScheme().toLowerCase().equals("ws")) {
    int port=uri.getPort() > 0 ? uri.getPort() : 80;
    String host=uri.getHost();
    endpoints.add(new ConnectionEndpoint(host,port,ConnectionEndpoint.Type.WS));
  }
 else   if (uri.getScheme().toLowerCase().equals("wss")) {
    int port=uri.getPort() > 0 ? uri.getPort() : 443;
    String host=uri.getHost();
    endpoints.add(new ConnectionEndpoint(host,port,ConnectionEndpoint.Type.WS_TLS));
  }
 else {
    throw new RuntimeException("Unknown scheme type: " + uri.getScheme());
  }
  return this;
}
