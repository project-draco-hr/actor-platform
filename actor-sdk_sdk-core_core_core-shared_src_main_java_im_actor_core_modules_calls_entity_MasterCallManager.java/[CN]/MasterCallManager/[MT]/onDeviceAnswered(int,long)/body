{
  CallNode device=getNode(uid,deviceId);
switch (device.getDeviceState()) {
case PENDING:
case ADVERTISED:
case CONNECTING_SILENCED:
    device.setDeviceState(CallNodeState.CONNECTING);
  break;
case SILENCED:
device.setDeviceState(CallNodeState.IN_PROGRESS);
break;
case IN_PROGRESS:
case CONNECTING:
throw new InvalidTransactionException();
}
if (device.getMember().getState() == MasterCallMemberState.RINGING || device.getMember().getState() == MasterCallMemberState.RINGING_REACHED) {
switch (device.getDeviceState()) {
case PENDING:
case ADVERTISED:
case CONNECTING:
case CONNECTING_SILENCED:
device.getMember().setState(MasterCallMemberState.CONNECTING);
isInvalidated=true;
break;
case IN_PROGRESS:
case SILENCED:
device.getMember().setState(MasterCallMemberState.IN_PROGRESS);
isInvalidated=true;
break;
}
}
}
