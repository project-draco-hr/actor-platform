{
  Log.d(TAG,"doConnect");
  isClosed=true;
  String url;
  if (getEndpoint().getType() == ConnectionEndpoint.Type.WS) {
    url="ws://" + getEndpoint().getHost() + ":"+ getEndpoint().getPort()+ "/";
  }
 else   if (getEndpoint().getType() == ConnectionEndpoint.Type.WS_TLS) {
    url="wss://" + getEndpoint().getHost() + ":"+ getEndpoint().getPort()+ "/";
  }
 else {
    throw new RuntimeException();
  }
  this.jsWebSocket=createJSWebSocket(url,this);
}
