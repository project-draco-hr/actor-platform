{
  api(new RequestDoCall(buidOutPeer(peer),busId)).then(new Consumer<ResponseDoCall>(){
    @Override public void apply(    ResponseDoCall responseDoCall){
      if (peer.getPeerType() == PeerType.GROUP) {
        for (        GroupMember gm : getGroup(peer.getPeerId()).getMembers()) {
          if (gm.getUid() != myUid()) {
            PeerStateHolder st=new PeerStateHolder(gm.getUid());
            peerStates.add(st);
            statesMap.put(st.getUid(),st);
          }
        }
      }
 else       if (peer.getPeerType() == PeerType.PRIVATE) {
        PeerStateHolder st=new PeerStateHolder(peer.getPeerId());
        peerStates.add(st);
        statesMap.put(st.getUid(),st);
      }
 else {
        throw new RuntimeException("Unsupported Peer Type group");
      }
      callId=responseDoCall.getCallId();
      callVM=callViewModels.spawnNewOutgoingVM(responseDoCall.getCallId(),peer);
      callManager.send(new CallManagerActor.DoCallComplete(responseDoCall.getCallId()),self());
      callback.onResult(responseDoCall.getCallId());
      callback=null;
    }
  }
).failure(new Consumer<Exception>(){
    @Override public void apply(    Exception e){
      callback.onError(e);
      callback=null;
      dispose();
    }
  }
).done(self());
}
