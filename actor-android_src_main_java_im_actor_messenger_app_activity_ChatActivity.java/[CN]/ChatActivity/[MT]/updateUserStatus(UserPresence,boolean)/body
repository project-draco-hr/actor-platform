{
  String s=Formatter.formatPresence(presence,users().get(peer.getPeerId()).getSex());
  if (s == null) {
    barSubtitleContainer.setVisibility(View.GONE);
  }
 else {
    barSubtitleContainer.setVisibility(View.VISIBLE);
    barSubtitle.setText(s);
  }
  if (isTyping) {
    barTyping.setText(R.string.typing_private);
    showView(barTypingContainer);
    hideView(barSubtitle);
  }
 else {
    hideView(barTypingContainer);
    showView(barSubtitle);
  }
}
