Function<T,Promise<R>> fun
