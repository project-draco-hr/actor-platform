{
  if (ContextCompat.checkSelfPermission(this,Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED || ContextCompat.checkSelfPermission(this,Manifest.permission.VIBRATE) != PackageManager.PERMISSION_GRANTED) {
    Log.d("Permissions","recordAudio - no permission :c");
    ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.RECORD_AUDIO,Manifest.permission.VIBRATE},PERMISSION_REQUEST_RECORD_AUDIO);
    return;
  }
  if (isAudioVisible) {
    return;
  }
  isAudioVisible=true;
  hideView(attachButton);
  hideView(messageEditText);
  hideView(emojiButton);
  hideView(sendContainer);
  audioFile=ActorSDK.sharedActor().getMessenger().getInternalTempFile("voice_msg","opus");
  setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
  long id=VoiceCaptureActor.LAST_ID.incrementAndGet();
  voiceRecordActor.send(new VoiceCaptureActor.Start(audioFile));
  slideAudio(0);
  audioTimer.setText("00:00");
  TranslateAnimation animation=new TranslateAnimation(Screen.getWidth(),0,0,0);
  animation.setDuration(160);
  audioContainer.clearAnimation();
  audioContainer.setAnimation(animation);
  audioContainer.animate();
  audioContainer.setVisibility(View.VISIBLE);
  AlphaAnimation alphaAnimation=new AlphaAnimation(1f,0.2f);
  alphaAnimation.setDuration(800);
  alphaAnimation.setRepeatMode(AlphaAnimation.REVERSE);
  alphaAnimation.setRepeatCount(AlphaAnimation.INFINITE);
  recordPoint.clearAnimation();
  recordPoint.setAnimation(alphaAnimation);
  recordPoint.animate();
}
