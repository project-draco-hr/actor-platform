{
  int i=item.getItemId();
  if (i == android.R.id.home) {
    finish();
  }
 else   if (i == R.id.clear) {
    new AlertDialog.Builder(this).setMessage(R.string.alert_delete_all_messages_text).setPositiveButton(R.string.alert_delete_all_messages_yes,new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog,      int which){
        execute(messenger().clearChat(peer));
      }
    }
).setNegativeButton(R.string.dialog_cancel,null).show().setCanceledOnTouchOutside(true);
  }
 else   if (i == R.id.leaveGroup) {
    new AlertDialog.Builder(this).setMessage(getString(R.string.alert_leave_group_message).replace("%1$s",groups().get(peer.getPeerId()).getName().get())).setPositiveButton(R.string.alert_leave_group_yes,new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog2,      int which){
        execute(messenger().leaveGroup(peer.getPeerId()));
        finish();
      }
    }
).setNegativeButton(R.string.dialog_cancel,null).show().setCanceledOnTouchOutside(true);
  }
 else   if (i == R.id.contact) {
    ActorSDK.sharedActor().startProfileActivity(ChatActivity.this,peer.getPeerId());
  }
 else   if (i == R.id.groupInfo) {
    ActorSDK.sharedActor().startGroupInfoActivity(ChatActivity.this,peer.getPeerId());
  }
 else   if (i == R.id.files) {
  }
  if (ActorSDK.sharedActor().isCallsEnabled()) {
    Context context=ActorSDK.sharedActor().getMessenger().getContext();
    Intent callIntent=new Intent(context,CallActivity.class);
    callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_MULTIPLE_TASK | Intent.FLAG_ACTIVITY_NEW_DOCUMENT);
    callIntent.putExtra("callId",0);
    context.startActivity(callIntent);
    context.startActivity(callIntent);
  }
  return super.onOptionsItemSelected(item);
}
