{
  super.onCreate(saveInstance);
  getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
  setContentView(R.layout.activity_dialog);
  setSupportActionBar((Toolbar)findViewById(R.id.toolbar));
  if (saveInstance == null) {
    Peer peer=Peer.fromUniqueId(getIntent().getExtras().getLong(EXTRA_CHAT_PEER));
    ChatFragment chatFragment=ChatFragment.create(peer);
    getSupportFragmentManager().beginTransaction().add(R.id.chatFragment,chatFragment).commitNow();
    String quote=getIntent().getStringExtra("forward_text_raw");
    if (quote != null) {
      chatFragment.onMessageQuote(quote);
    }
  }
}
