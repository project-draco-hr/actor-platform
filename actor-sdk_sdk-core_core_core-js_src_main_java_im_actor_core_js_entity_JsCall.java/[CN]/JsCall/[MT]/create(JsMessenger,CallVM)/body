{
  JsArray<JsPeerInfo> members=JsArray.createArray().cast();
  for (  CallMember member : model.getMembers().get()) {
    members.push(messenger.buildPeerInfo(Peer.user(member.getUid())));
  }
  String state;
switch (model.getState().get()) {
case CALLING_INCOMING:
    state="calling_in";
  break;
case CALLING_OUTGOING:
state="calling_out";
break;
case IN_PROGRESS:
state="in_progress";
break;
default :
case ENDED:
state="ended";
break;
}
return create(JsPeer.create(model.getPeer()),members,state);
}
