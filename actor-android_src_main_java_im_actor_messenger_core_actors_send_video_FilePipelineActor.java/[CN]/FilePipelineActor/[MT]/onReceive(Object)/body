{
  if (message instanceof FilePart) {
    if (isCompleted) {
      drop(message);
      return;
    }
    byte[] part=((FilePart)message).getPart();
    if (part.length == 0) {
      return;
    }
    try {
      randomAccessFile.seek(available);
      randomAccessFile.write(part);
      available+=part.length;
    }
 catch (    IOException e) {
      e.printStackTrace();
      context().stopSelf();
      return;
    }
    self().sendOnce(new FileAvailableNotify());
  }
 else   if (message instanceof FileEnd) {
    if (isCompleted) {
      drop(message);
      return;
    }
    isCompleted=true;
    self().sendOnce(new FileEndNotify());
  }
 else   if (message instanceof FileAvailableNotify) {
    onPipeAvailable(available);
  }
 else   if (message instanceof FileEndNotify) {
    onPipeCompleted();
  }
}
