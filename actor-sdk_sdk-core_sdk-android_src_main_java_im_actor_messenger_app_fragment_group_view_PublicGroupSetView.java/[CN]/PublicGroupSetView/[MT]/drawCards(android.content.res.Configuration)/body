{
  Context context=getContext();
  if (sv != null) {
    sv.removeAllViews();
    ll.removeView(sv);
  }
  if (groupsCards != null) {
    groupsCards.removeAllViews();
    ll.removeView(groupsCards);
  }
  if (data.getGroups() != null && data.getGroups().size() > 0) {
    if (groupsCards == null) {
      groupsCards=new LinearLayout(context);
      groupsCards.setPadding(0,Screen.dp(8),0,0);
    }
    boolean isPortrait=config.orientation == android.content.res.Configuration.ORIENTATION_PORTRAIT;
    boolean useScrollView=data.getGroups().size() > (isPortrait ? MAX_GROUPS_IN_SET_LANDSCAPE : MAX_GROUPS_IN_SET_PARTRAIT);
    for (    final PublicGroup group : data.getGroups()) {
      final PublicGroupCardView card=new PublicGroupCardView(context,group,counterType);
      card.setOnClickListener(new OnClickListener(){
        @Override public void onClick(        View v){
          if (callback != null) {
            callback.onClick(group);
          }
        }
      }
);
      groupsCards.addView(card,new LayoutParams(0,LayoutParams.WRAP_CONTENT,1));
    }
    if (useScrollView) {
      if (sv == null) {
        sv=new HorizontalScrollView(context);
        sv.setHorizontalScrollBarEnabled(false);
        sv.setOverScrollMode(OVER_SCROLL_NEVER);
      }
      sv.addView(groupsCards);
      ll.addView(sv);
    }
 else {
      ll.addView(groupsCards);
    }
  }
}
