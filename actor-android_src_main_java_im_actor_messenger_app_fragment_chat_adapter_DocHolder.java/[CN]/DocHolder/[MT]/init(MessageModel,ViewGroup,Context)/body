{
  this.context=context;
  LayoutInflater inflater=LayoutInflater.from(context);
  BubbleContainer v=(BubbleContainer)inflater.inflate(R.layout.adapter_dialog_doc,viewGroup,false);
  bubbleView=v.findViewById(R.id.bubbleContainer);
  bubbleView.setBackgroundResource(R.drawable.conv_bubble_media_in);
  fileName=(TextView)v.findViewById(R.id.fileName);
  fileSize=(TextView)v.findViewById(R.id.fileSize);
  fileIcon=(ImageView)v.findViewById(R.id.icon);
  status=(TextView)v.findViewById(R.id.status);
  downloadIcon=(TintImageView)v.findViewById(R.id.downloading);
  progressView=(CircularView)v.findViewById(R.id.progressView);
  progressView.setColor(context.getResources().getColor(R.color.primary));
  progressValue=(TextView)v.findViewById(R.id.progressValue);
  menu=v.findViewById(R.id.menu);
  menu.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      PopupMenu popup=new PopupMenu(context,v);
      popup.getMenuInflater().inflate(R.menu.doc_popup,popup.getMenu());
      popup.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener(){
        @Override public boolean onMenuItemClick(        MenuItem item){
          if (message != null && message.getContent() instanceof DocumentMessage) {
            DocumentMessage documentMessage=(DocumentMessage)message.getContent();
            Downloaded downloaded=downloaded().get(documentMessage.getLocation().getFileId());
            if (downloaded != null) {
              context.startActivity(Intents.shareDoc(downloaded));
            }
          }
          return true;
        }
      }
);
      popup.show();
    }
  }
);
  initBubbleHolder(v,false);
  return v;
}
