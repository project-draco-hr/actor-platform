{
  if (currentTasks.containsKey(gid)) {
    modules().getFilesModule().cancelUpload(currentTasks.get(gid));
    currentTasks.remove(gid);
  }
  long rid=RandomUtils.nextRid();
  currentTasks.put(gid,rid);
  tasksMap.put(rid,gid);
  modules().getGroupsModule().getAvatarVM(gid).getUploadState().change(new AvatarUploadState(descriptor,true));
  modules().getFilesModule().requestUpload(rid,descriptor,"avatar.jpg",self());
}
