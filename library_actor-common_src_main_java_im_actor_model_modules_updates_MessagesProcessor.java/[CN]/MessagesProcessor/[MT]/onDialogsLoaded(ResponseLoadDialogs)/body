{
  ArrayList<DialogHistory> dialogs=new ArrayList<DialogHistory>();
  long maxLoadedDate=Long.MAX_VALUE;
  for (  im.actor.model.api.Dialog dialog : dialogsResponse.getDialogs()) {
    maxLoadedDate=Math.min(dialog.getSortDate(),maxLoadedDate);
    Peer peer=convert(dialog.getPeer());
    AbsContent msgContent=convert(dialog.getMessage());
    if (msgContent == null) {
      continue;
    }
    dialogs.add(new DialogHistory(peer,dialog.getUnreadCount(),dialog.getSortDate(),dialog.getRid(),dialog.getDate(),dialog.getSenderUid(),msgContent,convert(dialog.getState())));
  }
  if (dialogs.size() > 0) {
    dialogsActor().send(new DialogsActor.HistoryLoaded(dialogs));
  }
  dialogsHistoryActor().send(new DialogsHistoryActor.LoadedMore(dialogsResponse.getDialogs().size(),maxLoadedDate));
}
