{
  super.onResume();
  CurrentCall call=messenger().getCurrentCall().get();
  if (call != null && call.getCallState() == CallState.ENDED) {
    getActivity().finish();
    return;
  }
  bind(messenger().getCurrentCall(),new ValueChangedListener<CurrentCall>(){
    @Override public void onChanged(    CurrentCall val,    ValueModel<CurrentCall> valueModel){
      if (val == null) {
        textView.setText("Null");
      }
 else {
        textView.setText("" + val.getCallState());
        if (val.getCallState() == CallState.ENDED) {
          textView.postDelayed(new Runnable(){
            @Override public void run(){
              if (getActivity() != null) {
                getActivity().finish();
              }
            }
          }
,1000);
        }
      }
    }
  }
);
}
