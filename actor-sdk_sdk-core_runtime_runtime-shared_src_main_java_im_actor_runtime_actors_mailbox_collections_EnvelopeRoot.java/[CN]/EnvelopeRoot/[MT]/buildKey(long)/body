{
  if (time <= 0 || time < usedNowSlot) {
    time=usedNowSlot++;
    return time;
  }
  long currentTime=ActorTime.currentTime();
  if (time < currentTime) {
    time=currentTime;
  }
  Iterator<Long> iterator=usedSlot.iterator();
  while (iterator.hasNext()) {
    long t=iterator.next();
    if (t < currentTime * MULTIPLE) {
      iterator.remove();
    }
  }
  long shift=0;
  while (usedSlot.contains(time * MULTIPLE + shift)) {
    shift++;
  }
  usedSlot.add(time * MULTIPLE + shift);
  return time * MULTIPLE + shift;
}
