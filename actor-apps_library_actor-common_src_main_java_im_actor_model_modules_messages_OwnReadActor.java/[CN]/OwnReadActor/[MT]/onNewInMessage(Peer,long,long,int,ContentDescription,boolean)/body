{
  long readState=modules().getMessagesModule().loadReadState(peer);
  if (sortingDate <= readState) {
    return;
  }
  if (contentDescription != null) {
    modules().getNotifications().onInMessage(peer,senderUid,sortingDate,contentDescription,hasCurrentUserMention);
  }
  HashSet<UnreadMessage> unread=messagesStorage.getUnread(peer);
  unread.add(new UnreadMessage(peer,rid,sortingDate));
  saveStorage();
  modules().getMessagesModule().getDialogsActor().send(new DialogsActor.CounterChanged(peer,unread.size()));
}
