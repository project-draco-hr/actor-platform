{
  SparseArray<Object> hashMap=new SparseArray<Object>();
  int currentTag;
  while ((currentTag=readTag(is)) > 0) {
    int id=currentTag >> 3;
    int type=currentTag & 0x7;
    if (type == TYPE_VARINT) {
      put(id,readVarInt(is),hashMap);
    }
 else     if (type == TYPE_LENGTH_DELIMITED) {
      int size=(int)readVarInt(is);
      put(id,readBytes(size,is),hashMap);
    }
 else     if (type == TYPE_64BIT) {
      put(id,readLong(is),hashMap);
    }
 else     if (type == TYPE_32BIT) {
      put(id,readUInt(is),hashMap);
    }
 else {
      throw new IOException("Unknown Wire Type #" + type);
    }
  }
  return hashMap;
}
