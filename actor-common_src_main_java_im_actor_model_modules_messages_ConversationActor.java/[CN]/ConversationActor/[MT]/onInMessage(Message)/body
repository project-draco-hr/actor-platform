{
  if (messages.getValue(message.getListId()) != null) {
    return;
  }
  messages.addOrUpdateItem(message);
  dialogsActor.send(new DialogsActor.InMessage(peer,message));
  if (message.getSenderId() == myUid()) {
    messagesStorage.getMessages().add(new OutUnreadMessage(message.getRid(),message.getDate()));
    savePending();
  }
}
