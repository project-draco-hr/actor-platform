{
  byte[] decryptedMessage=new PlainMessage(randomId,type,message).toByteArray();
  long crc32Val=0;
  try {
    CRC32 crc32=new CRC32();
    ByteArrayOutputStream stream=new ByteArrayOutputStream();
    writeInt(TYPE_PLAIN_MESSAGE,stream);
    writeProtoBytes(message,stream);
    crc32.update(stream.toByteArray());
    crc32Val=crc32.getValue();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  return new PlainPackage(TYPE_PLAIN_MESSAGE,decryptedMessage,crc32Val).toByteArray();
}
