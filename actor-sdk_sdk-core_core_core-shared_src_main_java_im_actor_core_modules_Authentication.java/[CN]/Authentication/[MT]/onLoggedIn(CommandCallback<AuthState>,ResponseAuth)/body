{
  state=AuthState.LOGGED_IN;
  myUid=response.getUser().getId();
  modules.getPreferences().putBool(KEY_AUTH,true);
  modules.getPreferences().putInt(KEY_AUTH_UID,myUid);
  modules.onLoggedIn();
  modules.getUpdatesModule().onUpdateReceived(new LoggedIn(response,new Runnable(){
    @Override public void run(){
      state=AuthState.LOGGED_IN;
      callback.onResult(state);
      User user=modules.getUsersModule().getUsersStorage().getValue(myUid);
      ArrayList<Long> records=new ArrayList<Long>();
      for (      ContactRecord contactRecord : user.getRecords()) {
        if (contactRecord.getRecordType() == ContactRecordType.PHONE) {
          records.add(Long.parseLong(contactRecord.getRecordData()));
        }
      }
    }
  }
),500L);
}
