{
  byte[] data=preferences().getBytes(PRIVATE_KEYS);
  if (data != null) {
    try {
      privateKeyStorage=new PrivateKeyStorage(data);
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
  if (privateKeyStorage == null) {
    EncryptionKey identityKey=new EncryptionKey(Randoms.randomId(),Curve25519.keyGen(Crypto.randomBytes(64)));
    ArrayList<EncryptionKey> keyPairs=new ArrayList<EncryptionKey>();
    keyPairs.add(new EncryptionKey(Randoms.randomId(),Curve25519.keyGen(Crypto.randomBytes(64))));
    privateKeyStorage=new PrivateKeyStorage(identityKey,keyPairs,0);
    preferences().putBytes(PRIVATE_KEYS,data);
  }
}
