{
  if (resultCode == RESULT_OK) {
    if (requestCode == REQUEST_GALLERY) {
      if (data.getData() != null) {
        sendUri(data.getData());
      }
    }
 else     if (requestCode == REQUEST_PHOTO) {
      messenger().sendPhoto(peer,fileName);
    }
 else     if (requestCode == REQUEST_VIDEO) {
      messenger().sendVideo(peer,fileName);
    }
 else     if (requestCode == REQUEST_DOC) {
      if (data.getData() != null) {
        sendUri(data.getData());
      }
 else       if (data.hasExtra("picked")) {
        ArrayList<String> files=data.getStringArrayListExtra("picked");
        if (files != null) {
          for (          String s : files) {
            messenger().sendDocument(peer,s);
          }
        }
      }
    }
  }
}
