{
  if (senderId == null || senderDeviceId == null) {
    return;
  }
  ApiWebRTCSignaling signal;
  try {
    signal=ApiWebRTCSignaling.fromBytes(data);
  }
 catch (  IOException e) {
    e.printStackTrace();
    return;
  }
  Log.d("CallBusActor","Message Received: " + signal);
  if (signal instanceof ApiAnswer) {
    ApiAnswer answer=(ApiAnswer)signal;
    peerCall.onAnswer(senderDeviceId,answer.getSdp());
  }
 else   if (signal instanceof ApiOffer) {
    ApiOffer offer=(ApiOffer)signal;
    peerCall.onAdvertised(senderDeviceId,new PeerSettings(offer.getOwnPeerSettings()));
    peerCall.onOffer(senderDeviceId,offer.getSdp());
  }
 else   if (signal instanceof ApiCandidate) {
    ApiCandidate candidate=(ApiCandidate)signal;
    peerCall.onCandidate(senderDeviceId,candidate.getIndex(),candidate.getId(),candidate.getSdp());
  }
 else   if (signal instanceof ApiNeedOffer) {
    ApiNeedOffer needOffer=(ApiNeedOffer)signal;
    peerCall.onAdvertised(needOffer.getDevice(),new PeerSettings(needOffer.getPeerSettings()));
    peerCall.onOfferNeeded(needOffer.getDevice());
  }
 else   if (signal instanceof ApiNeedDisconnect) {
    ApiNeedDisconnect disconnect=(ApiNeedDisconnect)signal;
    peerCall.disposePeer(disconnect.getDevice());
  }
 else   if (signal instanceof ApiEnableConnection) {
    ApiEnableConnection connection=(ApiEnableConnection)signal;
    peerCall.onOwnStarted();
    peerCall.onTheirStarted(connection.getDevice());
  }
 else   if (signal instanceof ApiAdvertiseMaster) {
    if (isMasterReady) {
      return;
    }
    isMasterReady=true;
    masterDeviceId=senderDeviceId;
    unstashAll(STASH);
    sendSignal(masterDeviceId,new ApiAdvertiseSelf(selfSettings.toApi()));
    peerCall.onTheirStarted(masterDeviceId);
  }
}
