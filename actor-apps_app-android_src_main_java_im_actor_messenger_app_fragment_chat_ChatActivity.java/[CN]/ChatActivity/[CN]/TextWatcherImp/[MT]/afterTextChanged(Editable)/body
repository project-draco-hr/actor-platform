{
  if (s.length() > 0) {
    sendButton.setTint(getResources().getColor(R.color.conv_send_enabled));
    sendButton.setEnabled(true);
  }
 else {
    sendButton.setTint(getResources().getColor(R.color.conv_send_disabled));
    sendButton.setEnabled(false);
  }
  int escapeMentionEdit=s.toString().indexOf(" ".concat(MENTION_BOUNDS_STR));
  if (!isOneCharErase && escapeMentionEdit != -1) {
    s.replace(escapeMentionEdit,escapeMentionEdit + 2,MENTION_BOUNDS_STR.concat(" "));
    if (s.charAt(messageEditText.getSelectionStart() - 1) == MENTION_BOUNDS_CHR)     messageEditText.setSelection(messageEditText.getSelectionStart() + 1);
  }
  if (mentionErase) {
    int firstBound=s.subSequence(0,mentionEraseStart).toString().lastIndexOf(MENTION_BOUNDS_STR);
    if (mentionEraseStart > 0 && firstBound > 0 && s.charAt(firstBound - 1) == '@') {
      for (      URLSpan span : s.getSpans(firstBound,mentionEraseStart,URLSpan.class)) {
        s.removeSpan(span);
      }
      s.replace(firstBound,mentionEraseStart,lastMentionSearch);
      if (useForceMentionHide) {
        hideMentions();
        forceMentionHide=true;
      }
    }
 else     if (mentionEraseStart > 0 && s.charAt(mentionEraseStart - 1) == MENTION_BOUNDS_CHR) {
      s.replace(mentionEraseStart - 2,mentionEraseStart,"");
    }
 else     if (mentionEraseStart > 0) {
      s.replace(mentionEraseStart - 1,mentionEraseStart,"");
    }
  }
  int emptyBoundsIndex=s.toString().indexOf(MENTION_BOUNDS_STR.concat(MENTION_BOUNDS_STR));
  if (isErase && emptyBoundsIndex != -1) {
    s.replace(emptyBoundsIndex,emptyBoundsIndex + 2,"");
  }
  if (s.toString().trim().length() == 1 && s.toString().trim().charAt(0) == MENTION_BOUNDS_CHR) {
    s.clear();
  }
}
