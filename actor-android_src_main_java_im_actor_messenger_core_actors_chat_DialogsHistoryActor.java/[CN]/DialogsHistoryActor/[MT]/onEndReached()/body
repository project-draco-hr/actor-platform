{
  if (state.getObj().isCompleted()) {
    return;
  }
  if (isLoading) {
    return;
  }
  isLoading=true;
  ask(requests().loadDialogs(state.getObj().getMaxLoadedDate(),LIMIT),new FutureCallback<ResponseLoadDialogs>(){
    @Override public void onResult(    final ResponseLoadDialogs result){
      ask(UserActor.userActor().onUpdateUsers(result.getUsers()),new FutureCallback<Boolean>(){
        @Override public void onResult(        Boolean result2){
          ask(GroupsActor.groupUpdates().onUpdateGroups(result.getGroups()),new FutureCallback<Boolean>(){
            @Override public void onResult(            Boolean result2){
              long maxValue=state.getObj().getMaxLoadedDate();
              for (              Dialog d : result.getDialogs()) {
                maxValue=Math.max(maxValue,d.getSortDate());
              }
              state.setObj(new State(maxValue,result.getDialogs().size() < LIMIT));
              DialogsActor.dialogs().onDialogsHistoryLoaded(result.getDialogs());
              isLoading=false;
            }
            @Override public void onError(            Throwable throwable){
            }
          }
);
        }
        @Override public void onError(        Throwable throwable){
        }
      }
);
    }
    @Override public void onError(    Throwable throwable){
    }
  }
);
}
