{
  if (shareAction != null) {
    return;
  }
  if (intent != null) {
    if (intent.getAction() != null) {
      if (intent.getAction().equals(Intent.ACTION_SEND)) {
        if ("text/plain".equals(intent.getType())) {
          shareAction=new ShareAction(intent.getStringExtra(Intent.EXTRA_TEXT));
        }
 else         if (intent.getParcelableExtra(Intent.EXTRA_STREAM) != null) {
          ArrayList<String> s=new ArrayList<>();
          s.add(intent.getParcelableExtra(Intent.EXTRA_STREAM).toString());
          shareAction=new ShareAction(s);
        }
      }
 else       if (intent.getAction().equals(Intent.ACTION_SEND_MULTIPLE)) {
        ArrayList<Uri> imageUris=intent.getParcelableArrayListExtra(Intent.EXTRA_STREAM);
        ArrayList<String> s=new ArrayList<>();
        if (imageUris != null) {
          for (          Uri u : imageUris) {
            s.add(u.toString());
          }
        }
        if (s.size() > 0) {
          shareAction=new ShareAction(s);
        }
      }
    }
    if (intent.getExtras() != null) {
      Bundle extras=intent.getExtras();
      if (extras.containsKey(Intents.EXTRA_SHARE_USER)) {
        shareAction=new ShareAction(extras.getInt(Intents.EXTRA_SHARE_USER));
      }
 else       if (extras.containsKey(Intents.EXTRA_FORWARD_TEXT)) {
        shareAction=new ShareAction(extras.getString(Intents.EXTRA_FORWARD_TEXT),extras.getString(Intents.EXTRA_FORWARD_TEXT_RAW));
      }
 else       if (extras.containsKey(Intents.EXTRA_FORWARD_CONTENT)) {
        shareAction=new ShareAction(extras.getByteArray(Intents.EXTRA_FORWARD_CONTENT));
      }
    }
  }
  if (shareAction == null) {
    setTitle(R.string.app_name);
  }
 else {
    setTitle(R.string.menu_share);
  }
}
