{
  if (intent != null) {
    if (intent.getAction() != null) {
      if (intent.getAction().equals(Intent.ACTION_VIEW) && intent.getData() != null) {
        joinGroupUrl=intent.getData().toString();
        if (joinGroupUrl != null && !joinGroupUrl.isEmpty()) {
          String[] urlSplit=null;
          if (joinGroupUrl.contains("join")) {
            urlSplit=joinGroupUrl.split("/join/");
          }
 else           if (joinGroupUrl.contains("token")) {
            urlSplit=joinGroupUrl.split("token=");
          }
          if (urlSplit != null) {
            joinGroupUrl=urlSplit[urlSplit.length - 1];
            getActivity().execute(messenger().joinGroupViaToken(joinGroupUrl),R.string.invite_link_title,new CommandCallback<Integer>(){
              @Override public void onResult(              Integer res){
                getActivity().startActivity(Intents.openGroupDialog(res,true,getActivity()));
                getActivity().finish();
                joinGroupUrl="";
              }
              @Override public void onError(              Exception e){
                joinGroupUrl="";
              }
            }
);
          }
        }
      }
 else       if (intent.getAction().equals(Intent.ACTION_SEND)) {
        if ("text/plain".equals(getIntent().getType())) {
          sendText=intent.getStringExtra(Intent.EXTRA_TEXT);
        }
 else         if (intent.getParcelableExtra(Intent.EXTRA_STREAM) != null) {
          sendUriString=intent.getParcelableExtra(Intent.EXTRA_STREAM).toString();
        }
      }
 else       if (intent.getAction().equals(Intent.ACTION_SEND_MULTIPLE)) {
        ArrayList<Uri> imageUris=intent.getParcelableArrayListExtra(Intent.EXTRA_STREAM);
        if (imageUris != null) {
          for (          Uri u : imageUris) {
            sendUriMultiple.add(u.toString());
          }
        }
      }
    }
    if (intent.getExtras() != null) {
      Bundle extras=intent.getExtras();
      if (extras.containsKey("share_user")) {
        shareUser=extras.getInt("share_user");
      }
 else       if (extras.containsKey("forward_text")) {
        forwardText=extras.getString("forward_text");
        forwardTextRaw=extras.getString("forward_text_raw");
      }
 else       if (extras.containsKey("forward_content")) {
        docContent=extras.getByteArray("forward_content");
      }
    }
  }
}
