{
  UserModel user=users().get(uid);
  if (user != null) {
    if (key != null) {
      publicKeys().putSync(new PublicKey(uid,keyHash,key));
    }
    User user2=user.getRaw().addKey(keyHash);
    if (user2 != user.getRaw()) {
      users().put(uid,user.getRaw().addKey(keyHash));
      if (uid != myUid()) {
        ConversationActor.conv(DialogType.TYPE_USER,uid).onInMessage(RandomUtil.randomId(),uid,System.currentTimeMillis(),new UserAddedDeviceMessage());
      }
 else {
      }
    }
  }
}
