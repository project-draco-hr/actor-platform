{
  Log.d(TAG,"onSignaling (" + callId + ")");
  if (webRTCController.getCallId() == callId) {
    AbsSignal signal=AbsSignal.fromBytes(message);
    if (signal == null) {
      return;
    }
    if (signal instanceof OfferSignal) {
      OfferSignal offer=(OfferSignal)signal;
      if (!isOfferReceived) {
        isOfferReceived=true;
        context().getCallsModule().getCall(callId).getCallStarted().change(im.actor.runtime.Runtime.getCurrentTime());
        context().getCallsModule().getCall(callId).getState().change(CallState.IN_PROGRESS);
        provider.onOfferReceived(callId,offer.getSdp());
      }
    }
 else     if (signal instanceof AnswerSignal) {
      AnswerSignal answer=(AnswerSignal)signal;
      if (!isAnswerReceived) {
        isAnswerReceived=true;
        provider.onAnswerReceived(callId,answer.getSdp());
      }
    }
 else     if (signal instanceof CandidateSignal) {
      CandidateSignal candidateSignal=(CandidateSignal)signal;
      if (!isReadyReceiveCandidates) {
        pendingCandidates.add(new Candidate(candidateSignal.getLabel(),candidateSignal.getId(),candidateSignal.getSdp()));
      }
 else {
        provider.onCandidate(callId,candidateSignal.getId(),candidateSignal.getLabel(),candidateSignal.getSdp());
      }
    }
  }
}
