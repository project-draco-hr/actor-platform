{
  Memoable m=(Memoable)digest;
  digest.update(input,0,input.length / 2);
  Memoable copy1=m.copy();
  Memoable copy2=copy1.copy();
  digest.update(input,input.length / 2,input.length - input.length / 2);
  digest.doFinal(resBuf,0);
  if (!areEqual(expected,resBuf)) {
    fail("failing memo vector test",results[results.length - 1],new String(Hex.encode(resBuf)));
  }
  m.reset(copy1);
  digest.update(input,input.length / 2,input.length - input.length / 2);
  digest.doFinal(resBuf,0);
  if (!areEqual(expected,resBuf)) {
    fail("failing memo reset vector test",results[results.length - 1],new String(Hex.encode(resBuf)));
  }
  Digest md=(Digest)copy2;
  md.update(input,input.length / 2,input.length - input.length / 2);
  md.doFinal(resBuf,0);
  if (!areEqual(expected,resBuf)) {
    fail("failing memo copy vector test",results[results.length - 1],new String(Hex.encode(resBuf)));
  }
}
