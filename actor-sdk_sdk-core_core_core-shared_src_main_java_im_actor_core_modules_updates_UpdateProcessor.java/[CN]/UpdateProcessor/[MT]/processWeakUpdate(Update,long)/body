{
  if (callsProcessor.process(update)) {
    return;
  }
  if (eventBusProcessor.process(update)) {
    return;
  }
  if (update instanceof UpdateUserOnline) {
    UpdateUserOnline userOnline=(UpdateUserOnline)update;
    presenceProcessor.onUserOnline(userOnline.getUid(),date);
  }
 else   if (update instanceof UpdateUserOffline) {
    UpdateUserOffline offline=(UpdateUserOffline)update;
    presenceProcessor.onUserOffline(offline.getUid(),date);
  }
 else   if (update instanceof UpdateUserLastSeen) {
    UpdateUserLastSeen lastSeen=(UpdateUserLastSeen)update;
    presenceProcessor.onUserLastSeen(lastSeen.getUid(),(int)lastSeen.getDate(),date);
  }
 else   if (update instanceof UpdateGroupOnline) {
    UpdateGroupOnline groupOnline=(UpdateGroupOnline)update;
    presenceProcessor.onGroupOnline(groupOnline.getGroupId(),groupOnline.getCount(),date);
  }
 else   if (update instanceof UpdateTyping) {
    UpdateTyping typing=(UpdateTyping)update;
    typingProcessor.onTyping(typing.getPeer(),typing.getUid(),typing.getTypingType());
  }
 else   if (update instanceof UpdateTypingStop) {
    UpdateTypingStop typing=(UpdateTypingStop)update;
    typingProcessor.onTypingStop(typing.getPeer(),typing.getUid(),typing.getTypingType());
  }
}
