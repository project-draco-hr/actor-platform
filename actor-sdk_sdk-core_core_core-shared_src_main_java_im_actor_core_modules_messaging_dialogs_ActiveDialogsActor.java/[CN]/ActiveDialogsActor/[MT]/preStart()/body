{
  super.preStart();
  specs=context().getMessagesModule().getDialogDescKeyValue();
  storage=new GroupedStorage();
  byte[] data=preferences().getBytes(PREFERENCE_GROUPED);
  if (data != null) {
    try {
      storage=new GroupedStorage(data);
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
  isLoaded=preferences().getBool(PREFERENCE_GROUPED_LOADED,false);
  if (!isLoaded) {
    request(new RequestLoadGroupedDialogs(),new RpcCallback<ResponseLoadGroupedDialogs>(){
      @Override public void onResult(      final ResponseLoadGroupedDialogs response){
        updates().executeRelatedResponse(response.getUsers(),response.getGroups(),self(),new Runnable(){
          @Override public void run(){
            applyGroups(response.getDialogs());
            isLoaded=true;
            preferences().putBool(PREFERENCE_GROUPED_LOADED,true);
          }
        }
);
      }
      @Override public void onError(      RpcException e){
      }
    }
);
  }
 else {
    notifyVM();
  }
}
