{
  if (isConversationVisible(peer)) {
    ConversationState state=conversationStates.getValue(peer.getUnuqueId());
    if (state.getUnreadCount() != 0 || state.getInReadDate() < state.getInMaxMessageDate()) {
      state=state.changeCounter(0).changeInReadDate(state.getInMaxMessageDate());
      conversationStates.addOrUpdateItem(state);
      context().getMessagesModule().getPlainReadActor().send(new CursorReaderActor.MarkRead(peer,state.getInMaxMessageDate()));
      notifyActiveDialogsVM();
      getDialogsRouter().onCounterChanged(peer,0);
    }
  }
}
