{
  if (date < inReadState) {
    return;
  }
  inReadState=date;
  inReadStateNew=Math.max(date,inReadStateNew);
  preferences().putLong(IN_READ_STATE_PREF,date);
  preferences().putLong(IN_READ_STATE_NEW_PREF,inReadStateNew);
  inPendingIndex.removeBeforeValue(date);
  if (!isHiddenPeer) {
    dialogsActor.send(new DialogsActor.CounterChanged(peer,inPendingIndex.getCount()));
  }
  if (dialogsGroupedActor != null) {
    dialogsGroupedActor.send(new GroupedDialogsActor.CounterChanged(peer,inPendingIndex.getCount()));
  }
}
