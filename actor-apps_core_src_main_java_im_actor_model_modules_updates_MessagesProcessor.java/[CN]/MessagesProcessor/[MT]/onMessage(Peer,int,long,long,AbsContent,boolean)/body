{
  boolean isOut=myUid() == senderUid;
  Message message=new Message(rid,date,date,senderUid,isOut ? MessageState.SENT : MessageState.UNKNOWN,msgContent);
  conversationActor(peer).send(message);
  if (!isOut) {
    boolean hasCurrentUserMention=false;
    AbsContent content=message.getContent();
    if (content instanceof TextContent) {
      ArrayList<Integer> mentions=((TextContent)content).getMentions();
      hasCurrentUserMention=mentions != null && mentions.contains(myUid());
    }
    ownReadActor().send(new OwnReadActor.NewMessage(peer,rid,date,senderUid,ContentDescription.fromContent(content),hasCurrentUserMention));
    plainReceiveActor().send(new CursorReceiverActor.MarkReceived(peer,date));
  }
 else {
    ownReadActor().send(new OwnReadActor.MessageRead(peer,date));
  }
}
