{
  if (ENABLE_LOG) {
    Log.d(TAG,"Performing import part with " + phoneToImportsPart.size() + " phones and "+ emailToImportsPart.size()+ " emails");
  }
  final ApiPhoneToImport[] phones=phoneToImportsPart.toArray(new ApiPhoneToImport[phoneToImportsPart.size()]);
  final ApiEmailToImport[] emailToImports=emailToImportsPart.toArray(new ApiEmailToImport[emailToImportsPart.size()]);
  request(new RequestImportContacts((java.util.List<ApiPhoneToImport>)phoneToImportsPart.clone(),(java.util.List<ApiEmailToImport>)emailToImportsPart.clone()),new RpcCallback<ResponseImportContacts>(){
    @Override public void onResult(    ResponseImportContacts response){
      for (      ApiPhoneToImport phoneToImport : phones) {
        markImported(phoneToImport.getPhoneNumber());
        importingPhones.remove(phoneToImport.getPhoneNumber());
      }
      for (      ApiEmailToImport emailToImport : emailToImports) {
        markImported(emailToImport.getEmail());
        importingEmails.remove(emailToImport.getEmail());
      }
      if (importingEmails.size() == 0 && importingPhones.size() == 0) {
        markImported();
      }
      if (response.getUsers().size() == 0) {
        if (ENABLE_LOG) {
          Log.d(TAG,"Import success, but no new contacts found");
        }
        return;
      }
      if (ENABLE_LOG) {
        Log.d(TAG,"Import success with " + response.getUsers().size() + " new contacts");
      }
      ArrayList<Integer> uids=new ArrayList<Integer>();
      for (      ApiUser u : response.getUsers()) {
        uids.add(u.getId());
      }
      updates().onUpdateReceived(new FatSeqUpdate(response.getSeq(),response.getState(),UpdateContactsAdded.HEADER,new UpdateContactsAdded(uids).toByteArray(),response.getUsers(),new ArrayList<ApiGroup>()));
    }
    @Override public void onError(    RpcException e){
      if (ENABLE_LOG) {
        Log.d(TAG,"Import failure");
      }
      e.printStackTrace();
    }
  }
);
}
