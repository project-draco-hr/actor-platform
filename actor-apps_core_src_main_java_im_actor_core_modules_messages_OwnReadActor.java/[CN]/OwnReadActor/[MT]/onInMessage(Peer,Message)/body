{
  long readState=modules().getMessagesModule().loadReadState(peer);
  if (message.getSortDate() <= readState) {
    return;
  }
  boolean hasUserMention=false;
  if (message.getContent() instanceof TextContent) {
    TextContent textContent=(TextContent)message.getContent();
    hasUserMention=textContent.getMentions().contains(myUid());
  }
  modules().getNotifications().onInMessage(peer,message.getSenderId(),message.getSortDate(),ContentDescription.fromContent(message.getContent()),hasUserMention);
}
