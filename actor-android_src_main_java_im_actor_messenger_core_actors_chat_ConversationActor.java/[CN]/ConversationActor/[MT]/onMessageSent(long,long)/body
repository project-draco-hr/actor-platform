{
  MessageModel message=listEngine.getValue(rid);
  if (message != null) {
    update(message,message.getRaw().changeState(MessageState.SENT).changeDate(date));
    if (message.getRaw().getContent() instanceof DocumentMessage) {
      DocumentMessage documentMessage=(DocumentMessage)message.getRaw().getContent();
      documentsEngine.addOrUpdateItem(new Document(rid,documentMessage.getLocation(),documentMessage.getName(),"",message.getRaw().getSenderId(),message.getRaw().getTime()));
    }
    dialogsActor.onMessageStateChanged(type,id,rid,MessageState.SENT);
  }
}
