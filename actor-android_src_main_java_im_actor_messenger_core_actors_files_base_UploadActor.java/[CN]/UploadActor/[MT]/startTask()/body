{
  if (useEncryption) {
    uploadFileName=AppContext.getExternalTempFile("enc","bin");
    ask(FileEncryption.fileEncryption().encryptFile(sourceFileName,uploadFileName),new FutureCallback<byte[]>(){
      @Override public void onResult(      byte[] bytes){
        encryptionKey=bytes;
        startUpload();
      }
      @Override public void onError(      Throwable throwable){
        error(throwable);
      }
    }
);
  }
 else {
    uploadFileName=sourceFileName;
    startUpload();
  }
}
