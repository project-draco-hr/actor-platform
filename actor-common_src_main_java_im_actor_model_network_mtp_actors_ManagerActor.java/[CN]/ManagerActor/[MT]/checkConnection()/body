{
  if (isCheckingConnections) {
    return;
  }
  if (currentConnection == null) {
    Log.d(TAG,"Trying to create connection...");
    isCheckingConnections=true;
    final int id=NEXT_CONNECTION.getAndIncrement();
    ConnectionFactory.createConnection(id,endpoints.fetchEndpoint(),new ConnectionCallback(){
      @Override public void onMessage(      byte[] data,      int offset,      int len){
        self().send(new InMessage(data,offset,len));
      }
      @Override public void onConnectionDie(){
        self().send(new ConnectionDie(id));
      }
    }
,new ConnectionFactory.CreateConnectionCallback(){
      @Override public void onConnectionCreated(      Connection connection){
        self().send(new ConnectionCreated(id,connection));
      }
      @Override public void onConnectionCreateError(){
        self().send(new ConnectionCreateFailure());
      }
    }
);
  }
}
