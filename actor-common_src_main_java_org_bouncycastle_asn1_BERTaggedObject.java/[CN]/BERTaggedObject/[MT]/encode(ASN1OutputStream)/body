{
  out.writeTag(BERTags.CONSTRUCTED | BERTags.TAGGED,tagNo);
  out.write(0x80);
  if (!empty) {
    if (!explicit) {
      Enumeration e;
      if (obj instanceof ASN1OctetString) {
        if (obj instanceof BEROctetString) {
          e=((BEROctetString)obj).getObjects();
        }
 else {
          ASN1OctetString octs=(ASN1OctetString)obj;
          BEROctetString berO=new BEROctetString(octs.getOctets());
          e=berO.getObjects();
        }
      }
 else       if (obj instanceof ASN1Sequence) {
        e=((ASN1Sequence)obj).getObjects();
      }
 else       if (obj instanceof ASN1Set) {
        e=((ASN1Set)obj).getObjects();
      }
 else {
        throw new RuntimeException("not implemented: " + obj.getClass().getName());
      }
      while (e.hasMoreElements()) {
        out.writeObject((ASN1Encodable)e.nextElement());
      }
    }
 else {
      out.writeObject(obj);
    }
  }
  out.write(0x00);
  out.write(0x00);
}
