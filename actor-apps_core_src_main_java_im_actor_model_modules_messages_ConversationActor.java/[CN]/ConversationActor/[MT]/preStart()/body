{
  messages=messages(peer);
  dialogsActor=modules().getMessagesModule().getDialogsActor();
  outPendingIndex=modules().getConfiguration().getStorageProvider().createIndex("out_pending_" + peer.getPeerType() + "_"+ peer.getPeerId());
  inPendingIndex=modules().getConfiguration().getStorageProvider().createIndex("in_pending_" + peer.getPeerType() + "_"+ peer.getPeerId());
  inReadState=modules().getPreferences().getLong(IN_READ_STATE_PREF,0);
  outReadState=modules().getPreferences().getLong(OUT_READ_STATE_PREF,0);
  outReceiveState=modules().getPreferences().getLong(OUT_RECEIVE_STATE_PREF,0);
}
