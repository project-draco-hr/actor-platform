{
  isCanceled=false;
  try {
    ImageMetadata metadata=new FileSource(fileName).getImageMetadata();
    Bitmap preloaded=ImageLoading.loadBitmapOptimized(fileName);
    Bitmap optimized=ImageRotating.fixExif(preloaded,metadata.getExifOrientation());
    optimized=ImageScaling.scaleFill(optimized,800,800);
    String externalFile=AppContext.getInternalTempFile("avatar","jpg");
    ImageLoading.save(optimized,externalFile);
    performUpload(externalFile);
  }
 catch (  ImageLoadException e) {
    e.printStackTrace();
    ToastActor.get().show("Unable to load file");
  }
catch (  ImageSaveException e) {
    e.printStackTrace();
    ToastActor.get().show("Unable to load file");
  }
}
