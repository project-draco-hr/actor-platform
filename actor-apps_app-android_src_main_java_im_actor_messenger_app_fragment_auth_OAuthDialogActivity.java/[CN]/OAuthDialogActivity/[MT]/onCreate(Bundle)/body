{
  super.onCreate(savedInstanceState);
  WebView wv=new WebView(this);
  wv.getSettings().setJavaScriptEnabled(true);
  wv.loadUrl(messenger().getPreferences().getString(Auth.KEY_OAUTH_REDIRECT_URL));
  wv.setWebViewClient(new WebViewClient(){
    @Override public boolean shouldOverrideUrlLoading(    WebView view,    String url){
      view.loadUrl(url);
      return true;
    }
    @Override public void onLoadResource(    WebView view,    String url){
      if (url.startsWith("https://actor.im/auth/oauth2callback")) {
        Uri u=Uri.parse(url);
        String code=u.getQueryParameter("code");
        setResult(RESULT_OK,new Intent().putExtra("code",code));
        finish();
      }
 else {
        super.onLoadResource(view,url);
      }
    }
  }
);
  LinearLayout ll=new LinearLayout(this);
  ll.setGravity(Gravity.CENTER);
  ll.setOrientation(LinearLayout.VERTICAL);
  LinearLayout.LayoutParams llp=new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,ViewGroup.LayoutParams.WRAP_CONTENT);
  ll.addView(wv,llp);
  setContentView(ll);
}
