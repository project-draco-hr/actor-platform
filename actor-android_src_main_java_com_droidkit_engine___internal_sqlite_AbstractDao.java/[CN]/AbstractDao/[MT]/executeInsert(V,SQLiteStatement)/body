{
  long rowId;
  if (db.isDbLockedByCurrentThread()) {
synchronized (stmt) {
      bindValues(stmt,entity);
      rowId=stmt.executeInsert();
    }
  }
 else {
    db.beginTransaction();
    try {
synchronized (stmt) {
        bindValues(stmt,entity);
        rowId=stmt.executeInsert();
      }
      db.setTransactionSuccessful();
    }
  finally {
      db.endTransaction();
    }
  }
  return rowId;
}
