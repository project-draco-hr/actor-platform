{
  if (LOG) {
    Log.d(TAG,"Starting download #" + fileReference.getFileId());
  }
  Downloaded downloaded1=downloaded.getValue(fileReference.getFileId());
  if (downloaded1 != null) {
    return;
  }
  QueueItem queueItem=findItem(fileReference.getFileId());
  if (queueItem == null) {
    if (LOG) {
      Log.d(TAG,"- Adding to queue");
    }
    queueItem=new QueueItem(fileReference);
    queueItem.isStopped=false;
    queue.add(0,queueItem);
  }
 else {
    if (LOG) {
      Log.d(TAG,"- Promoting in queue");
    }
    if (queueItem.isStopped) {
      queueItem.isStopped=false;
      for (      final FileCallback callback : queueItem.callbacks) {
        im.actor.runtime.Runtime.dispatch(new Runnable(){
          @Override public void run(){
            callback.onDownloading(0);
          }
        }
);
      }
    }
    promote(fileReference.getFileId());
  }
  checkQueue();
}
