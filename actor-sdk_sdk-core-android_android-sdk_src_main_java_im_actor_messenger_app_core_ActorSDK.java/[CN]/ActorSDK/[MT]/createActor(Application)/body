{
  AndroidContext.setContext(application);
  Fresco.initialize(application);
  AppContext.setContext(application);
  this.smileProcessor=new SmileProcessor(application);
  this.smileProcessor.loadEmoji();
  ConfigurationBuilder builder=new ConfigurationBuilder();
  for (int i=0; i < endpoints.length; i++) {
    builder.addEndpoint(endpoints[i]);
  }
  builder.setPhoneBookProvider(new AndroidPhoneBook());
  builder.setNotificationProvider(new AndroidNotifications(AppContext.getContext()));
  builder.setDeviceCategory(DeviceCategory.MOBILE);
  builder.setPlatformType(PlatformType.ANDROID);
  builder.setApiConfiguration(new ApiConfiguration(getVersionTitle(),getAppId(),getApiKey(),getDeviceName(),AppContext.getContext().getPackageName() + ":" + Build.SERIAL));
  this.messenger=new AndroidMessenger(AppContext.getContext(),builder.build());
}
