{
  Log.d(TAG,"doEncrypt2");
  byte[] encData;
  try {
    encData=ActorBox.closeBox(ByteStrings.intToBytes(ownKeyGroupId),data,Crypto.randomBytes(32),new ActorBoxKey(encKey));
  }
 catch (  IntegrityException e) {
    e.printStackTrace();
    future.onError(e);
    return;
  }
  EncryptedBox encryptedBox=new EncryptedBox(encryptedKeys.toArray(new EncryptedBoxKey[encryptedKeys.size()]),ByteStrings.merge(ByteStrings.intToBytes(ownKeyGroupId),encData));
  Log.d(TAG,"doEncrypt:EncPackage: " + Hex.toHex(encData));
  for (  EncryptedBoxKey k : encryptedKeys) {
    Log.d(TAG,"Key: " + Hex.toHex(k.getEncryptedKey()));
  }
  future.onResult(encryptedBox);
}
