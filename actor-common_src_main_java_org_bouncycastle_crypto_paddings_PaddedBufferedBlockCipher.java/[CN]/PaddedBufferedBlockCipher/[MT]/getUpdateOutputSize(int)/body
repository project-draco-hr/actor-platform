{
  int total=len + bufOff;
  int leftOver=total % buf.length;
  if (leftOver == 0) {
    return Math.max(0,total - buf.length);
  }
  return total - leftOver;
}
