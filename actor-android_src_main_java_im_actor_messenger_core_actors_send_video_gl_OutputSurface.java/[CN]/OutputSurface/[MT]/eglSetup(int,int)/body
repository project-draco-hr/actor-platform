{
  mEGL=(EGL10)EGLContext.getEGL();
  mEGLDisplay=mEGL.eglGetDisplay(EGL10.EGL_DEFAULT_DISPLAY);
  if (!mEGL.eglInitialize(mEGLDisplay,null)) {
    throw new RuntimeException("unable to initialize EGL10");
  }
  int[] attribList={EGL10.EGL_RED_SIZE,8,EGL10.EGL_GREEN_SIZE,8,EGL10.EGL_BLUE_SIZE,8,EGL10.EGL_SURFACE_TYPE,EGL10.EGL_PBUFFER_BIT,EGL10.EGL_RENDERABLE_TYPE,EGL_OPENGL_ES2_BIT,EGL10.EGL_NONE};
  EGLConfig[] configs=new EGLConfig[1];
  int[] numConfigs=new int[1];
  if (!mEGL.eglChooseConfig(mEGLDisplay,attribList,configs,1,numConfigs)) {
    throw new RuntimeException("unable to find RGB888+pbuffer EGL config");
  }
  int[] attrib_list={EGL14.EGL_CONTEXT_CLIENT_VERSION,2,EGL10.EGL_NONE};
  mEGLContext=mEGL.eglCreateContext(mEGLDisplay,configs[0],EGL10.EGL_NO_CONTEXT,attrib_list);
  checkEglError("eglCreateContext");
  if (mEGLContext == null) {
    throw new RuntimeException("null context");
  }
  int[] surfaceAttribs={EGL10.EGL_WIDTH,width,EGL10.EGL_HEIGHT,height,EGL10.EGL_NONE};
  mEGLSurface=mEGL.eglCreatePbufferSurface(mEGLDisplay,configs[0],surfaceAttribs);
  checkEglError("eglCreatePbufferSurface");
  if (mEGLSurface == null) {
    throw new RuntimeException("surface was null");
  }
}
