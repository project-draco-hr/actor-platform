{
  if (message instanceof UserOnline) {
    UserOnline online=(UserOnline)message;
    onUserOnline(online.getUid());
  }
 else   if (message instanceof UserOffline) {
    UserOffline offline=(UserOffline)message;
    onUserOffline(offline.getUid());
  }
 else   if (message instanceof UserLastSeen) {
    UserLastSeen lastSeen=(UserLastSeen)message;
    onUserLastSeen(lastSeen.getUid(),lastSeen.getDate());
  }
 else   if (message instanceof GroupOnline) {
    GroupOnline groupOnline=(GroupOnline)message;
    onGroupOnline(groupOnline.getGid(),groupOnline.getCount());
  }
 else   if (message instanceof Subscribe) {
    subscribe(((Subscribe)message).getPeer());
  }
 else   if (message instanceof SessionCreated) {
    onNewSessionCreated();
  }
 else {
    drop(message);
  }
}
